<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>POLLO HARANA - Menú Inteligente</title>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700;800&display=swap" rel="stylesheet">
    <style>
        :root {
            --primario: #4a1c1c;
            --secundario: #ffcc00;
            --fondo: #f4f1ea;
            --whatsapp: #25d366;
            --blanco: #ffffff;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; }
        body { font-family: 'Montserrat', sans-serif; background: var(--fondo); padding-bottom: 100px; }

        header {
            background: var(--primario);
            padding: 30px 20px;
            text-align: center;
            border-radius: 0 0 40px 40px;
            color: white;
            border-bottom: 5px solid var(--secundario);
        }

        .logo { max-width: 120px; filter: drop-shadow(0 4px 6px rgba(0,0,0,0.3)); }

        /* Formulario de Datos del Cliente */
        #seccion-datos {
            background: var(--blanco);
            margin: 20px;
            padding: 20px;
            border-radius: 20px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }

        .input-grupo { margin-bottom: 10px; }
        .input-grupo label { display: block; font-size: 0.8rem; font-weight: bold; margin-bottom: 5px; }
        input { width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 10px; }

        #info-cliente-guardada {
            display: none;
            background: #eee;
            padding: 10px 20px;
            border-radius: 50px;
            margin: 10px 20px;
            font-size: 0.75rem;
            justify-content: space-between;
            align-items: center;
        }

        /* Menú de Productos */
        .contenedor-menu {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            padding: 20px;
        }

        .card {
            background: var(--blanco);
            border-radius: 30px;
            overflow: hidden;
            box-shadow: 0 10px 20px rgba(0,0,0,0.05);
            text-align: center;
            display: flex;
            flex-direction: column;
        }

        .card img { width: 100%; height: 200px; object-fit: cover; border-bottom: 4px solid var(--secundario); }
        .card-body { padding: 20px; }
        .precio { font-size: 1.5rem; font-weight: 800; color: var(--primario); }

        .btn-agregar {
            background: var(--primario);
            color: white;
            border: none;
            padding: 12px;
            width: 100%;
            border-radius: 15px;
            font-weight: bold;
            cursor: pointer;
            margin-top: 10px;
        }

        /* Carrito Flotante */
        #carrito-flotante {
            position: fixed;
            bottom: 0;
            width: 100%;
            background: var(--blanco);
            padding: 20px;
            border-radius: 30px 30px 0 0;
            box-shadow: 0 -5px 20px rgba(0,0,0,0.2);
            z-index: 1000;
        }

        .item-carrito {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
            font-size: 0.9rem;
        }

        .controles-qty { display: flex; gap: 10px; align-items: center; }
        .btn-qty { background: #ddd; border: none; width: 25px; height: 25px; border-radius: 5px; font-weight: bold; }

        .btn-enviar-wa {
            background: var(--whatsapp);
            color: white;
            width: 100%;
            padding: 15px;
            border-radius: 20px;
            text-decoration: none;
            display: block;
            text-align: center;
            font-weight: 800;
            margin-top: 15px;
        }

        .total-pago { font-weight: 800; font-size: 1.2rem; text-align: right; margin-top: 10px; border-top: 1px dashed #ccc; padding-top: 10px; }
        
        footer { text-align: center; font-size: 0.7rem; color: #888; margin-top: 20px; padding-bottom: 120px; }
    </style>
</head>
<body>

    <header>
        <img src="pollo-harana.png" alt="Logo" class="logo">
        <h1>POLLO HARANA</h1>
        <p><i>El Rey del Asado, Papá</i></p>
    </header>

    <div id="seccion-datos">
        <h3>Tus Datos de Entrega</h3>
        <p style="font-size: 0.7rem; color: #666; margin-bottom: 10px;">Solo los pedimos la primera vez.</p>
        <div class="input-grupo">
            <label>Nombre Completo</label>
            <input type="text" id="nombre" placeholder="Ej: Juan Pérez">
        </div>
        <div class="input-grupo">
            <label>Dirección Exacta / Barrio</label>
            <input type="text" id="direccion" placeholder="Ej: Calle 5 #10-20">
        </div>
        <div class="input-grupo">
            <label>Celular</label>
            <input type="tel" id="celular" placeholder="Ej: 310...">
        </div>
        <button onclick="guardarDatos()" class="btn-agregar" style="background: var(--whatsapp);">GUARDAR DATOS</button>
    </div>

    <div id="info-cliente-guardada">
        <span id="texto-cliente"></span>
        <button onclick="editarDatos()" style="border:none; background:none; color:blue; text-decoration:underline; cursor:pointer;">Editar</button>
    </div>

    <main class="contenedor-menu">
        <div class="card">
            <img src="https://via.placeholder.com/400x300?text=Picada+25k" alt="Picada 25">
            <div class="card-body">
                <p class="precio">$25.000</p>
                <h3>Picada 25k</h3>
                <button class="btn-agregar" onclick="agregarAlCarrito('Picada 25k', 25000)">+ AGREGAR</button>
            </div>
        </div>

        <div class="card">
            <img src="https://via.placeholder.com/400x300?text=Picada+30k" alt="Picada 30">
            <div class="card-body">
                <p class="precio">$30.000</p>
                <h3>Picada 30k</h3>
                <button class="btn-agregar" onclick="agregarAlCarrito('Picada 30k', 30000)">+ AGREGAR</button>
            </div>
        </div>
        
        <div class="card">
            <img src="https://via.placeholder.com/400x300?text=Picada+50k" alt="Picada 50">
            <div class="card-body">
                <p class="precio">$50.000</p>
                <h3>Picada 50k</h3>
                <button class="btn-agregar" onclick="agregarAlCarrito('Picada 50k', 50000)">+ AGREGAR</button>
            </div>
        </div>
    </main>

    <footer>
        APP DESARROLLADA POR VIBRAS POSITIVAS
    </footer>

    <div id="carrito-flotante" style="display: none;">
        <h3 style="font-size: 1rem; margin-bottom: 10px;">Tu Pedido Actual:</h3>
        <div id="lista-carrito"></div>
        <div class="total-pago">Total: $<span id="total-monto">0</span></div>
        <a href="#" onclick="enviarWhatsApp()" class="btn-enviar-wa">ENVIAR PEDIDO A WHATSAPP</a>
    </div>

    <script>
        let carrito = [];

        // Lógica de Datos del Cliente
        window.onload = function() {
            if(localStorage.getItem('clienteNombre')) {
                mostrarInfoGuardada();
            }
        };

        function guardarDatos() {
            const n = document.getElementById('nombre').value;
            const d = document.getElementById('direccion').value;
            const c = document.getElementById('celular').value;
            
            if(n && d && c) {
                localStorage.setItem('clienteNombre', n);
                localStorage.setItem('clienteDir', d);
                localStorage.setItem('clienteCel', c);
                mostrarInfoGuardada();
            } else {
                alert("Por favor llena todos los datos");
            }
        }

        function mostrarInfoGuardada() {
            document.getElementById('seccion-datos').style.display = 'none';
            document.getElementById('info-cliente-guardada').style.display = 'flex';
            document.getElementById('texto-cliente').innerText = `Entregar a: ${localStorage.getItem('clienteNombre')} | ${localStorage.getItem('clienteDir')}`;
        }

        function editarDatos() {
            document.getElementById('seccion-datos').style.display = 'block';
            document.getElementById('info-cliente-guardada').style.display = 'none';
        }

        // Lógica del Carrito
        function agregarAlCarrito(nombre, precio) {
            const itemExistente = carrito.find(item => item.nombre === nombre);
            if(itemExistente) {
                itemExistente.cantidad++;
            } else {
                carrito.push({nombre, precio, cantidad: 1});
            }
            renderCarrito();
        }

        function cambiarCant(nombre, delta) {
            const item = carrito.find(i => i.nombre === nombre);
            item.cantidad += delta;
            if(item.cantidad < 1) {
                carrito = carrito.filter(i => i.nombre !== nombre);
            }
            renderCarrito();
        }

        function renderCarrito() {
            const lista = document.getElementById('lista-carrito');
            const flotante = document.getElementById('carrito-flotante');
            lista.innerHTML = '';
            let total = 0;

            if(carrito.length > 0) {
                flotante.style.display = 'block';
                carrito.forEach(item => {
                    total += (item.precio * item.cantidad);
                    lista.innerHTML += `
                        <div class="item-carrito">
                            <span>${item.nombre} ($${item.precio.toLocaleString()})</span>
                            <div class="controles-qty">
                                <button class="btn-qty" onclick="cambiarCant('${item.nombre}', -1)">-</button>
                                <strong>${item.cantidad}</strong>
                                <button class="btn-qty" onclick="cambiarCant('${item.nombre}', 1)">+</button>
                            </div>
                        </div>`;
                });
                document.getElementById('total-monto').innerText = total.toLocaleString();
            } else {
                flotante.style.display = 'none';
            }
        }

        function enviarWhatsApp() {
            if(!localStorage.getItem('clienteNombre')) {
                alert("Primero guarda tus datos de entrega.");
                return;
            }

            let texto = `*FACTURA DE PEDIDO - POLLO HARANA*\n`;
            texto += `--------------------------------\n`;
            texto += `*CLIENTE:* ${localStorage.getItem('clienteNombre')}\n`;
            texto += `*DIRECCIÓN:* ${localStorage.getItem('clienteDir')}\n`;
            texto += `*CELULAR:* ${localStorage.getItem('clienteCel')}\n`;
            texto += `--------------------------------\n`;
            
            let total = 0;
            carrito.forEach(item => {
                let subtotal = item.precio * item.cantidad;
                total += subtotal;
                texto += `${item.cantidad}x ${item.nombre} - Unid: $${item.precio.toLocaleString()} | Sub: *$${subtotal.toLocaleString()}*\n`;
            });

            texto += `--------------------------------\n`;
            texto += `*TOTAL A PAGAR: $${total.toLocaleString()}*\n\n`;
            texto += `_App desarrollada por Vibras Positivas_`;

            const link = `https://wa.me/573103540921?text=${encodeURIComponent(texto)}`;
            window.open(link, '_blank');
        }
    </script>
</body>
</html>
